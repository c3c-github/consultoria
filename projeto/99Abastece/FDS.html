<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FDS v1.1 - Especificação de Desenho Funcional | 99 Abastece</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="https://c3c.my.site.com/resource/1677081909000/c3clogo" type="image/png">
  <style>
    html, body {font-family:'Montserrat',sans-serif;overflow-x:hidden;-webkit-font-smoothing:antialiased;}
    :root{--c3c-blue:#2978FF;--c3c-teal:#1DDDBD;--c3c-gray:#4b5563;}
    .section-title{border-bottom:2px solid var(--c3c-blue);color:var(--c3c-blue);font-weight:700;font-size:1.75rem;margin-bottom:2rem;}
    .badge{display:inline-block;padding:0.25rem 0.6rem;border-radius:9999px;font-size:0.75rem;font-weight:600;background:#eef2ff;color:#1e3a8a;margin-right:0.3rem;}
    main section.prose h2{font-size:1.5em;border-bottom:1px solid #e5e7eb;padding-bottom:.3em;}
    main section.prose h3{font-size:1.25em;} main section.prose p{margin-bottom:1em;line-height:1.6;color:var(--c3c-gray);}
    main section.prose ul{margin-left:1.5em;margin-bottom:1em;color:var(--c3c-gray);} main section.prose li{margin-bottom:.5em;}
    main section.prose table{width:100%;border-collapse:collapse;margin-bottom:1em;font-size:.875rem;}
    main section.prose th, main section.prose td{border:1px solid #d1d5db;padding:.5em;text-align:left;} main section.prose th{background:#f9fafb;font-weight:600;}
    .svg-wrap{background:#fbfdff;border:1px solid #e5e7eb;border-radius:.75rem;padding:.75rem}
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex flex-col min-h-screen">
    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-20 shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center"><img src="https://c3c.my.site.com/resource/1677081909000/c3clogo" class="max-h-[35px]" alt="C3C Logo"></div>
          <div class="text-lg font-semibold text-gray-700 text-center flex-grow px-4">Functional Design Specification (FDS)</div>
          <div class="text-sm font-medium text-gray-500 min-w-[150px] text-right">Projeto 99 Abastece</div>
        </div>
      </div>
    </header>

    <main class="flex-grow w-[90vw] max-w-6xl mx-auto my-8 p-6 sm:p-10 lg:p-12 bg-white rounded-lg shadow-lg">
      <section id="fds" class="prose max-w-none prose-sm sm:prose-base">
        <h2 class="section-title not-prose">Especificação de Desenho Funcional — Salesforce 99 Abastece <span class="text-gray-400 text-sm">v1.1</span></h2>
        <div class="mb-4">
          <span class="badge">MC como broker</span>
          <span class="badge">Omni-Channel ativo</span>
          <span class="badge">D+7 automático</span>
          <span class="badge">Correção: campos padrão</span>
        </div>

        <div class="p-3 rounded-md bg-blue-50 border border-blue-200 text-sm mb-6">
          <strong>Atualização v1.1:</strong> Substituição dos campos custom <em>StatusEnvio__c</em> e <em>DataEncerramento__c</em> pelos campos <strong>padrão</strong> do Salesforce: 
          <code>CampaignMember.Status</code> e <code>Opportunity.CloseDate</code>. Ajustes aplicados nas seções de Campos/Layouts e nos fluxos de referência.
        </div>

        <h3>1. Introdução e Objetivo</h3>
        <p>Este documento descreve o desenho funcional detalhado da solução Salesforce implementada para o projeto 99 Abastece, especificando fluxos, comportamentos e regras funcionais que suportam o processo de engajamento e reativação de motoristas via WhatsApp.</p>

        <h3>2. Escopo Funcional</h3>
        <ul>
          <li>Gestão de campanhas e motoristas no <strong>Sales Cloud</strong>.</li>
          <li>Envio de mensagens em massa e individuais via <strong>Marketing Cloud</strong>.</li>
          <li>Atendimento e roteamento de respostas via <strong>Digital Engagement / Omni‑Channel</strong>.</li>
          <li>Integração com APIs da 99 para abastecimento e ranking.</li>
        </ul>

        <h3>3. Requisitos Funcionais Detalhados</h3>
        <table>
          <thead><tr><th>ID</th><th>Descrição</th><th>Origem</th><th>Resultado Esperado</th></tr></thead>
          <tbody>
            <tr><td>RF01</td><td>Carga de motoristas (CSV/API) e deduplicação automática.</td><td>Sales Cloud</td><td>Motoristas atualizados e associados a campanhas sem duplicidade.</td></tr>
            <tr><td>RF02</td><td>Priorização de motoristas com base em regras configuradas.</td><td>Sales Cloud</td><td><strong>CampaignMember.Status</strong> atualizado para envio.</td></tr>
            <tr><td>RF03</td><td>Criação automática de Oportunidade no disparo ativo.</td><td>Marketing Cloud</td><td>Oportunidade criada e vinculada à Conta e Campanha.</td></tr>
            <tr><td>RF04</td><td>Envio de mensagens ativas via WhatsApp (MC como broker).</td><td>Marketing Cloud</td><td>Mensagem enviada e métricas registradas.</td></tr>
            <tr><td>RF05</td><td>Recepção de resposta e roteamento via Omni.</td><td>Digital Engagement</td><td>Mensagem entregue ao analista disponível.</td></tr>
            <tr><td>RF06</td><td>Encerramento automático D+7 sem abastecimento.</td><td>Sales Cloud</td><td><strong>Opportunity.CloseDate</strong> e <em>Stage</em> refletindo perda no prazo.</td></tr>
            <tr><td>RF07</td><td>Relatórios de campanha, vendedor e conversão.</td><td>Sales Cloud</td><td>Indicadores disponíveis em dashboards.</td></tr>
          </tbody>
        </table>

        <h3>4. Fluxos Funcionais Principais</h3>
        <h4>Carga e Deduplicação</h4>
        <div class="svg-wrap not-prose">
          <svg viewBox="0 0 900 160" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
            <rect x="40" y="40" width="160" height="60" rx="8" fill="#2978FF" opacity="0.9"/>
            <rect x="260" y="40" width="160" height="60" rx="8" fill="#1DDDBD" opacity="0.9"/>
            <rect x="480" y="40" width="160" height="60" rx="8" fill="#f59e0b" opacity="0.9"/>
            <rect x="700" y="40" width="160" height="60" rx="8" fill="#9ca3af" opacity="0.9"/>
            <text x="120" y="75" text-anchor="middle" font-size="12" fill="white">Carga CSV/API</text>
            <text x="340" y="75" text-anchor="middle" font-size="12" fill="white">Regras de Dedupe</text>
            <text x="560" y="75" text-anchor="middle" font-size="12" fill="white">Upsert Contas/Membros</text>
            <text x="780" y="75" text-anchor="middle" font-size="12" fill="white">Campanha Ativa</text>
            <g stroke="#6b7280" stroke-width="2"><line x1="200" y1="70" x2="260" y2="70"/><line x1="420" y1="70" x2="480" y2="70"/><line x1="640" y1="70" x2="700" y2="70"/></g>
          </svg>
        </div>

        <h4>Disparo e Atendimento</h4>
        <div class="svg-wrap not-prose">
          <svg viewBox="0 0 900 160" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
            <rect x="40" y="40" width="160" height="60" rx="8" fill="#1DDDBD"/>
            <rect x="260" y="40" width="160" height="60" rx="8" fill="#2978FF"/>
            <rect x="480" y="40" width="160" height="60" rx="8" fill="#f59e0b"/>
            <rect x="700" y="40" width="160" height="60" rx="8" fill="#9ca3af"/>
            <text x="120" y="75" text-anchor="middle" font-size="12" fill="white">Disparo MC (HSM)</text>
            <text x="340" y="75" text-anchor="middle" font-size="12" fill="white">Cria Oportunidade</text>
            <text x="560" y="75" text-anchor="middle" font-size="12" fill="white">Omni Roteia Resposta</text>
            <text x="780" y="75" text-anchor="middle" font-size="12" fill="white">Encerramento D+7</text>
            <g stroke="#6b7280" stroke-width="2"><line x1="200" y1="70" x2="260" y2="70"/><line x1="420" y1="70" x2="480" y2="70"/><line x1="640" y1="70" x2="700" y2="70"/></g>
          </svg>
        </div>

        <h3>5. Regras de Negócio e Validações</h3>
        <ul>
          <li><strong>Duplicidade:</strong> DriverID é chave única; duplicados são ignorados.</li>
          <li><strong>Carteira:</strong> após primeira resposta, dono da Opp é fixado.</li>
          <li><strong>D+7:</strong> término do prazo de conversão usa <strong>Opportunity.CloseDate</strong> + atualização de <em>Stage</em>.</li>
          <li><strong>Retentativas:</strong> Jornadas MC com tempos parametrizáveis.</li>
          <li><strong>Status do Membro:</strong> utilização de <strong>CampaignMember.Status</strong> para sinalizar pronto p/ envio, enviado, respondido, etc.</li>
        </ul>

        <h3>6. Campos, Layouts e Perfis</h3>
        <table>
          <thead><tr><th>Objeto</th><th>Campo</th><th>Tipo</th><th>Visibilidade</th><th>Observações</th></tr></thead>
          <tbody>
            <tr><td>Conta</td><td>DriverID__c</td><td>Texto (Externo)</td><td>Todas</td><td>Chave de integração</td></tr>
            <tr><td>Membro de Campanha</td><td><strong>Status</strong></td><td><em>Picklist (padrão)</em></td><td>99 / Adecco</td><td>Usa <code>CampaignMember.Status</code> (nativo)</td></tr>
            <tr><td>Oportunidade</td><td><strong>CloseDate</strong></td><td><em>Data (padrão)</em></td><td>99 / Supervisão</td><td>Data de encerramento oficial</td></tr>
          </tbody>
        </table>

        <h3>7. Mensagens e Interações (WhatsApp / MC)</h3>
        <ul>
          <li>Disparos via <strong>Marketing Cloud</strong> (Journey Builder).</li>
          <li>HSMs: “Reativação”, “Lembrete D+3”, “Última Chance D+6”.</li>
          <li>Variáveis: Nome, Desconto, Link, Data Limite.</li>
          <li>Respostas registradas e encaminhadas automaticamente ao Omni.</li>
        </ul>

        <h3>8. Relatórios e Dashboards</h3>
        <ul>
          <li>Taxa de resposta, taxa de conversão, volume de disparos.</li>
          <li>Metas por campanha, ranking de analistas e pipeline de oportunidades.</li>
          <li>Indicadores de retentativas e D+7.</li>
        </ul>

        <h3>9. Critérios de Aceite Funcional</h3>
        <ul>
          <li>Cada requisito RF01‑RF07 testado e validado no ambiente UAT.</li>
          <li>Fluxos automatizados (carga, D+7, retentativa) executam sem erro.</li>
          <li>Mensagens enviadas via MC e entregues corretamente no WhatsApp.</li>
          <li>Roteamento Omni funcionando conforme regra de ociosidade/dono.</li>
          <li>Relatórios refletem <strong>CampaignMember.Status</strong> e <strong>Opportunity.CloseDate</strong> corretamente.</li>
        </ul>

        <h3>10. Riscos, Dependências e Limitações</h3>
        <ul>
          <li>Dependência da liberação do número WhatsApp verificado.</li>
          <li>Limitação do volume de disparos simultâneos (MC/Meta).</li>
          <li>Dependência da API de abastecimento para fechamento D+7.</li>
        </ul>

        <h3>11. Aprovações</h3>
        <table>
          <thead><tr><th>Nome</th><th>Papel</th><th>Assinatura</th><th>Data</th></tr></thead>
          <tbody>
            <tr><td>Victoria Candelario</td><td>Líder de Negócio 99 (Sponsor)</td><td></td><td></td></tr>
            <tr><td>Karine Cunha</td><td>Gerente de Projeto C3C</td><td></td><td></td></tr>
          </tbody>
        </table>
      </section>
    </main>

    <footer class="text-center py-4 text-xs text-gray-500 border-t bg-white mt-auto">
      Repositório de Documentação - C3C Software & 99 Abastece - Outubro 2025
    </footer>
  </div>
</body>
</html>