<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Férias - C3C Workplace</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Ícones Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Fonte Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                    },
                    colors: {
                        c3c: {
                            blue: '#2978FF',
                            teal: '#1DDDBD',
                            dark: '#1a1a1a',
                            bg: '#F8FAFC'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Montserrat', sans-serif; background-color: #F8FAFC; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); }
        
        /* Barra de progresso animada */
        .progress-bar { transition: width 1s ease-in-out; }
    </style>
</head>
<body class="h-screen flex overflow-hidden bg-c3c-bg">

    <!-- 1. SIDEBAR -->
    <aside class="w-20 lg:w-64 bg-white border-r border-gray-100 flex flex-col z-20 transition-all duration-300">
        <div class="h-20 flex items-center justify-center lg:justify-start lg:px-8 border-b border-gray-50">
            <div class="w-8 h-8 bg-gradient-to-br from-[#2978FF] to-[#1DDDBD] rounded-lg flex items-center justify-center text-white font-bold text-xs">C3C</div>
            <span class="hidden lg:block ml-3 font-bold text-gray-800 tracking-wide text-lg">Workplace</span>
        </div>
        <nav class="flex-1 py-6 space-y-2">
            <a href="#" class="flex items-center justify-center lg:justify-start gap-3 px-4 lg:px-6 py-3 text-gray-400 hover:bg-gray-50 transition-colors">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                <span class="hidden lg:block font-medium text-sm">Visão Geral</span>
            </a>
            <a href="#" class="flex items-center justify-center lg:justify-start gap-3 px-4 lg:px-6 py-3 text-gray-400 hover:bg-gray-50 transition-colors">
                <i data-lucide="clock" class="w-5 h-5"></i>
                <span class="hidden lg:block font-medium text-sm">Minhas Horas</span>
            </a>
            <!-- Menu Ativo -->
            <a href="#" class="flex items-center justify-center lg:justify-start gap-3 px-4 lg:px-6 py-3 bg-teal-50 text-teal-600 border-r-4 border-teal-500 font-semibold transition-colors">
                <i data-lucide="palmtree" class="w-5 h-5"></i>
                <span class="hidden lg:block text-sm">Férias & Recesso</span>
            </a>
        </nav>
    </aside>

    <!-- 2. MAIN CONTENT -->
    <main class="flex-1 flex flex-col relative w-full overflow-hidden">
        
        <!-- Header -->
        <header class="h-20 bg-white border-b border-gray-200 flex items-center justify-between px-8 shrink-0">
            <div class="flex items-center gap-4">
                <h1 class="text-xl font-bold text-gray-800">Minhas Férias</h1>
                <span class="bg-gray-100 text-gray-500 text-xs px-2 py-1 rounded-full border border-gray-200">
                    Contrato: CLT Standard (30 dias/ano)
                </span>
            </div>
            
            <button onclick="openRequestModal()" class="bg-teal-500 hover:bg-teal-600 text-white px-4 py-2 rounded-lg font-bold text-sm shadow-md flex items-center gap-2 transition-transform active:scale-95">
                <i data-lucide="plus-circle" class="w-4 h-4"></i>
                Solicitar Férias
            </button>
        </header>

        <!-- Content Scrollable -->
        <div class="flex-1 overflow-y-auto p-8 fade-in">
            
            <!-- Cards de Saldo -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Saldo Disponível -->
                <div class="bg-white p-6 rounded-xl border border-teal-100 shadow-sm relative overflow-hidden group">
                    <div class="absolute right-0 top-0 w-24 h-24 bg-teal-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
                    <div class="relative z-10">
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Saldo Disponível</p>
                        <div class="flex items-baseline gap-2">
                            <span class="text-4xl font-extrabold text-teal-600">12.5</span>
                            <span class="text-sm font-bold text-gray-500">dias</span>
                        </div>
                        <p class="text-[10px] text-teal-500 mt-2 font-medium">Equivalente a 100h de trabalho</p>
                    </div>
                </div>

                <!-- Em Aquisição (Provisório) -->
                <div class="bg-white p-6 rounded-xl border border-blue-100 shadow-sm relative overflow-hidden">
                    <div class="absolute right-0 top-0 w-24 h-24 bg-blue-50 rounded-bl-full -mr-4 -mt-4"></div>
                    <div class="relative z-10">
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Em Aquisição (Atual)</p>
                        <div class="flex items-baseline gap-2">
                            <span class="text-4xl font-extrabold text-blue-600">+1.2</span>
                            <span class="text-sm font-bold text-gray-500">dias</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-3">
                            <div class="bg-blue-500 h-1.5 rounded-full" style="width: 45%"></div>
                        </div>
                        <p class="text-[10px] text-gray-400 mt-1">Baseado em 160h trabalhadas este mês</p>
                    </div>
                </div>

                <!-- Regra de Acúmulo -->
                <div class="bg-gray-900 p-6 rounded-xl shadow-lg text-white flex flex-col justify-center">
                    <div class="flex items-center gap-2 mb-2">
                        <i data-lucide="calculator" class="w-4 h-4 text-teal-400"></i>
                        <p class="text-xs font-bold uppercase tracking-wider opacity-80">Sua Regra de Conversão</p>
                    </div>
                    <p class="text-sm font-light opacity-90">
                        A cada <strong class="text-teal-400">160 horas</strong> úteis trabalhadas e aprovadas, você acumula <strong class="text-teal-400">2.5 dias</strong> de férias.
                    </p>
                    <div class="mt-4 text-[10px] bg-white/10 p-2 rounded border border-white/20">
                        Fator: 1h = 0.015625 dias de férias
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- Coluna Esquerda: Extrato de Acúmulo (O "Banco") -->
                <div class="lg:col-span-2 bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col">
                    <div class="p-5 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-bold text-gray-800 flex items-center gap-2">
                            <i data-lucide="history" class="w-4 h-4 text-blue-600"></i> Extrato de Acúmulo & Uso
                        </h3>
                        <button class="text-xs text-blue-600 font-bold hover:underline">Ver Completo</button>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-gray-50 text-gray-500 uppercase text-xs font-bold">
                                <tr>
                                    <th class="px-6 py-3">Data/Período</th>
                                    <th class="px-6 py-3">Origem</th>
                                    <th class="px-6 py-3 text-right">Horas Ref.</th>
                                    <th class="px-6 py-3 text-right">Lançamento</th>
                                    <th class="px-6 py-3 text-right">Saldo</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100" id="statement-body">
                                <!-- Dados simulados -->
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-gray-600">10 Dez 2024</td>
                                    <td class="px-6 py-4">
                                        <span class="flex items-center gap-2 font-medium text-gray-800">
                                            <i data-lucide="briefcase" class="w-3 h-3 text-blue-500"></i> Fechamento Nov/24
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-right text-gray-500">176h</td>
                                    <td class="px-6 py-4 text-right text-green-600 font-bold">+ 2.75 dias</td>
                                    <td class="px-6 py-4 text-right font-bold text-gray-800">12.50</td>
                                </tr>
                                <tr class="hover:bg-gray-50 bg-red-50/30">
                                    <td class="px-6 py-4 text-gray-600">15 Nov 2024</td>
                                    <td class="px-6 py-4">
                                        <span class="flex items-center gap-2 font-medium text-gray-800">
                                            <i data-lucide="palmtree" class="w-3 h-3 text-red-500"></i> Resgate (Feriadão)
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-right text-gray-500">-</td>
                                    <td class="px-6 py-4 text-right text-red-600 font-bold">- 2.00 dias</td>
                                    <td class="px-6 py-4 text-right font-bold text-gray-800">9.75</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-gray-600">10 Nov 2024</td>
                                    <td class="px-6 py-4">
                                        <span class="flex items-center gap-2 font-medium text-gray-800">
                                            <i data-lucide="briefcase" class="w-3 h-3 text-blue-500"></i> Fechamento Out/24
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-right text-gray-500">168h</td>
                                    <td class="px-6 py-4 text-right text-green-600 font-bold">+ 2.50 dias</td>
                                    <td class="px-6 py-4 text-right font-bold text-gray-800">11.75</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Coluna Direita: Solicitações -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm flex flex-col h-full">
                    <div class="p-5 border-b border-gray-100">
                        <h3 class="font-bold text-gray-800">Minhas Solicitações</h3>
                    </div>
                    <div class="p-5 flex-1 space-y-4">
                        
                        <!-- Solicitação Pendente -->
                        <div class="border border-yellow-200 bg-yellow-50 rounded-lg p-4 relative">
                            <div class="absolute top-3 right-3">
                                <span class="bg-yellow-200 text-yellow-800 text-[10px] font-bold px-2 py-1 rounded uppercase">Em Análise</span>
                            </div>
                            <p class="text-xs text-gray-500 font-bold uppercase mb-1">Carnaval 2025</p>
                            <p class="text-sm font-bold text-gray-900 mb-2">03 Mar - 07 Mar</p>
                            <div class="flex justify-between items-end">
                                <span class="text-xs text-gray-600 bg-white px-2 py-1 rounded border border-gray-200">5 dias</span>
                                <button class="text-xs text-red-500 hover:underline">Cancelar</button>
                            </div>
                        </div>

                        <!-- Solicitação Aprovada -->
                        <div class="border border-green-200 bg-green-50 rounded-lg p-4 relative opacity-70 hover:opacity-100 transition-opacity">
                            <div class="absolute top-3 right-3">
                                <span class="bg-green-200 text-green-800 text-[10px] font-bold px-2 py-1 rounded uppercase">Agendado</span>
                            </div>
                            <p class="text-xs text-gray-500 font-bold uppercase mb-1">Recesso Fim de Ano</p>
                            <p class="text-sm font-bold text-gray-900 mb-2">26 Dez - 31 Dez</p>
                            <div class="flex justify-between items-end">
                                <span class="text-xs text-gray-600 bg-white px-2 py-1 rounded border border-gray-200">4 dias úteis</span>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Modal de Solicitação -->
    <div id="request-modal" class="fixed inset-0 modal-backdrop z-50 hidden flex items-center justify-center opacity-0 transition-opacity duration-300 p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg transform scale-95 transition-transform duration-300">
            
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="text-lg font-bold text-gray-800">Solicitar Férias</h3>
                <button onclick="closeRequestModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="p-6">
                <div class="bg-teal-50 border border-teal-100 rounded-lg p-3 mb-6 flex items-center justify-between">
                    <span class="text-xs text-teal-800 font-bold">Saldo Atual:</span>
                    <span class="text-lg font-bold text-teal-600">12.5 dias</span>
                </div>

                <form id="vacation-form" onchange="calculatePreview()">
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">Data Início</label>
                            <input type="date" id="start-date" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-2 focus:ring-teal-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">Data Fim</label>
                            <input type="date" id="end-date" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-2 focus:ring-teal-500 outline-none">
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-xs font-bold text-gray-500 mb-1">Observação (Opcional)</label>
                        <textarea class="w-full border border-gray-300 rounded-lg p-2 text-sm h-20 resize-none focus:ring-2 focus:ring-teal-500 outline-none" placeholder="Ex: Viagem familiar..."></textarea>
                    </div>

                    <!-- Previsão -->
                    <div id="calc-preview" class="hidden bg-gray-50 rounded-lg p-4 border border-gray-200 mb-6">
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-600">Dias Solicitados:</span>
                            <span class="font-bold text-gray-900" id="preview-days">0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Saldo Final:</span>
                            <span class="font-bold text-teal-600" id="preview-balance">12.5</span>
                        </div>
                    </div>

                    <div class="flex justify-end gap-3">
                        <button type="button" onclick="closeRequestModal()" class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg font-bold text-sm hover:bg-gray-200">Cancelar</button>
                        <button type="button" onclick="submitRequest()" class="px-4 py-2 bg-teal-500 text-white rounded-lg font-bold text-sm hover:bg-teal-600 shadow-md">Confirmar Solicitação</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Dados do Colaborador (Mock)
        const currentBalance = 12.5;

        // Modal Logic
        function openRequestModal() {
            const modal = document.getElementById('request-modal');
            modal.classList.remove('hidden');
            // Pequeno delay para animação CSS
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('div').classList.remove('scale-95');
            }, 10);
        }

        function closeRequestModal() {
            const modal = document.getElementById('request-modal');
            modal.classList.add('opacity-0');
            modal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.getElementById('vacation-form').reset();
                document.getElementById('calc-preview').classList.add('hidden');
            }, 300);
        }

        // Simples cálculo de dias (apenas para demonstração)
        function calculatePreview() {
            const start = document.getElementById('start-date').valueAsDate;
            const end = document.getElementById('end-date').valueAsDate;
            const previewBox = document.getElementById('calc-preview');

            if (start && end && end >= start) {
                // Diferença em ms convertida para dias
                const diffTime = Math.abs(end - start);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1; 
                
                document.getElementById('preview-days').innerText = diffDays;
                
                const newBalance = currentBalance - diffDays;
                const balanceEl = document.getElementById('preview-balance');
                balanceEl.innerText = newBalance.toFixed(1);
                
                if (newBalance < 0) {
                    balanceEl.className = "font-bold text-red-500";
                    balanceEl.innerText += " (Insuficiente)";
                } else {
                    balanceEl.className = "font-bold text-teal-600";
                }

                previewBox.classList.remove('hidden');
            } else {
                previewBox.classList.add('hidden');
            }
        }

        function submitRequest() {
            const balanceEl = document.getElementById('preview-balance');
            if(balanceEl.innerText.includes("Insuficiente")) {
                alert("Saldo insuficiente para esta solicitação.");
                return;
            }
            alert("Solicitação enviada para aprovação do gestor!");
            closeRequestModal();
        }
    </script>
</body>
</html>