<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Encaminhamento - Viv Saúde</title>
    
    <!-- Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Variáveis de Cor --- */
        :root {
            --viv-primary: #FFE678; /* Amarelo Viv */
            --viv-white: #FFFFFF;
            --viv-black: #000000;
            --viv-gray-text: #374151; /* Cinza escuro para texto */
            --viv-gray-border: #D1D5DB; /* Cinza para bordas de input */
            --viv-gray-light-bg: #f9fafb; /* Fundo de sucesso */
        }

        /* --- Reset Básico e Fundo --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--viv-white);
            color: var(--viv-gray-text);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1.5rem;
            position: relative;
            overflow-x: hidden;
        }

        /* Imagem de fundo com gradiente */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://vivsaude.com.br/_next/image?url=https%3A%2F%2Fcms.vivsaude.com.br%2Fuploads%2FCamada_4_f639575de5.png&w=640&q=75');
            background-repeat: no-repeat;
            background-position: top right;
            background-size: cover;
            opacity: 0.2;
            z-index: -1;
        }

        /* --- Container Principal --- */
        .portal-container {
            background-color: var(--viv-white);
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 100%;
            max-width: 42rem; /* 672px */
            overflow: hidden;
            position: relative;
            z-index: 10;
        }

        /* --- Cabeçalho --- */
        .portal-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            background-color: var(--viv-primary);
        }
        .portal-header img {
            height: 4rem; /* 64px */
            width: auto;
            margin-bottom: 0.5rem;
        }
        .portal-header .logo-fallback {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: var(--viv-black);
            display: none; /* Oculto por padrão */
        }
        .portal-header h1 {
            font-size: 2.25rem; /* 36px */
            font-weight: 700;
            color: var(--viv-black);
            margin-top: 1rem;
            text-align: center;
        }

        /* --- Formulário --- */
        .portal-form {
            padding: 2rem;
        }

        .form-step {
            display: none; /* Oculto por padrão, JS controla */
        }
        .form-step.active {
            display: block;
        }

        .form-step h2 {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: var(--viv-gray-text);
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            font-size: 0.875rem; /* 14px */
            font-weight: 500;
            color: var(--viv-gray-text);
            margin-bottom: 0.25rem;
        }

        /* Estilo dos Inputs */
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem; /* 12px 16px */
            border: 1px solid var(--viv-gray-border);
            border-radius: 0.5rem; /* 8px */
            background-color: var(--viv-white);
            font-size: 1rem; /* 16px */
            color: var(--viv-gray-text);
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .form-input::placeholder {
            color: #9ca3af; /* Cinza 400 */
        }
        .form-input:focus {
            outline: none;
            border-color: var(--viv-primary);
            box-shadow: 0 0 0 3px rgba(255, 230, 120, 0.5); /* Sombra de foco amarela */
        }

        /* --- Estilo dos Botões --- */
        .btn-container {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        /* Layout de botões lado a lado */
        .btn-container.row {
            flex-direction: row-reverse; /* Primário na direita */
        }
        
        .btn {
            width: 100%;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem; /* 8px */
            font-size: 1rem;
            font-weight: 600;
            border: 1px solid transparent;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn:hover {
            transform: translateY(-2px); /* Efeito de levantar */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .btn:active {
            transform: scale(0.98); /* Efeito de clique */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        /* Botão Primário (Amarelo) */
        .btn-primary {
            background-color: var(--viv-primary);
            color: var(--viv-black);
            border-color: var(--viv-primary);
        }
        .btn-primary:hover {
            background-color: #fde047; /* Amarelo mais claro */
        }

        /* Botão Secundário (Borda Preta) */
        .btn-secondary {
            background-color: var(--viv-white);
            color: var(--viv-black);
            border-color: var(--viv-black);
        }
        .btn-secondary:hover {
            background-color: #f9fafb; /* Cinza bem claro */
        }

        /* --- Outros Elementos --- */
        .login-forgot-link {
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280; /* Cinza 500 */
            margin-top: 1rem;
        }

        /* Tela de Sucesso */
        .success-message {
            text-align: center;
            padding: 2rem 0;
        }
        .success-message svg {
            width: 4rem;
            height: 4rem;
            color: #22c55e; /* Verde 500 */
            margin: 0 auto;
        }
        .success-message h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--viv-black);
            margin-top: 1rem;
        }
        .success-message p {
            font-size: 1rem;
            color: var(--viv-gray-text);
            margin-top: 0.5rem;
        }

        /* Mensagem de Erro */
        #error-message {
            color: #ef4444; /* Vermelho 500 */
            font-weight: 500;
            text-align: center;
            margin-top: 1rem;
            display: none; /* Oculto por padrão */
        }
        
        /* Utilitários */
        .hidden {
            display: none !important;
        }

    </style>
</head>
<body>

    <!-- Container Principal do Portal -->
    <div class="portal-container">
        
        <!-- Cabeçalho com Logo -->
        <header class="portal-header">
            <img 
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:AN_d9GcRP1z6kwTR0r2z1fx6Fl6kpexB3h8GUlGrgrQ&s" 
                alt="Logo da Viv Saúde"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
            >
            <!-- Fallback de texto para o logo -->
            <span class="logo-fallback">Viv Saúde</span>
            <h1 id="portal-title">Acesso ao Portal</h1>
        </header>

        <!-- Formulário Multi-Etapas -->
        <form id="referral-form" class="portal-form" onsubmit="return false;">

            <!-- Etapa 0: Login -->
            <div id="step-0-login" class="form-step active">
                <div class="form-group">
                    <label for="email">Email (CRM ou Corporativo)</label>
                    <input type="email" id="email" class="form-input" placeholder="seu.email@dominio.com" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" class="form-input" placeholder="••••••••" required>
                </div>
                
                <div class="btn-container">
                    <button id="btn-login" class="btn btn-primary">Entrar</button>
                </div>
                <p class="login-forgot-link">Esqueceu a senha?</p>
            </div>

            <!-- Etapa 1: Dados do Paciente -->
            <div id="step-1-patient" class="form-step">
                <h2>1. Dados do Paciente</h2>
                <div class="form-group">
                    <label for="nome">Nome Completo</label>
                    <input type="text" id="nome" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input type="text" id="cpf" class="form-input" placeholder="000.000.000-00" required>
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone</label>
                    <input type="tel" id="telefone" class="form-input" placeholder="(00) 00000-0000">
                </div>
                
                <div class="btn-container">
                    <button id="btn-next" class="btn btn-primary">Próximo: Detalhes do Encaminhamento</button>
                </div>
            </div>

            <!-- Etapa 2: Encaminhamento -->
            <div id="step-2-referral" class="form-step">
                <h2>2. Encaminhamento</h2>
                <div class="form-group">
                    <label for="hospital">Hospital (Viv Saúde)</label>
                    <select id="hospital" class="form-input" required>
                        <option value="">Selecione um hospital...</option>
                        <option value="Hosp. Viv Central (SP)">Hosp. Viv Central (SP)</option>
                        <option value="Hosp. Viv Zona Sul (RJ)">Hosp. Viv Zona Sul (RJ)</option>
                        <option value="Hosp. Viv Oeste (SP)">Hosp. Viv Oeste (SP)</option>
                        <option value="Hosp. Viv Barra (RJ)">Hosp. Viv Barra (RJ)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="especialidade">Especialidade</label>
                    <select id="especialidade" class="form-input" required>
                        <option value="">Selecione a especialidade...</option>
                        <option value="Cardiologia">Cardiologia</option>
                        <option value="Ortopedia">Ortopedia</option>
                        <option value="Saúde Mental">Saúde Mental</option>
                        <option value="Clínica Geral">Clínica Geral</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="motivo">Motivo/Observações</label>
                    <textarea id="motivo" rows="3" class="form-input" placeholder="Descreva brevemente o motivo do encaminhamento..."></textarea>
                </div>
                
                <div class="btn-container row">
                    <button id="btn-submit" class="btn btn-primary">Confirmar Encaminhamento</button>
                    <button id="btn-back" class="btn btn-secondary">Voltar</button>
                </div>
            </div>

            <!-- Etapa 3: Sucesso -->
            <div id="step-3-success" class="form-step">
                <div class="success-message">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h2>Encaminhamento Realizado!</h2>
                    <p>O paciente <strong id="success-patient-name"></strong> foi encaminhado com sucesso.</p>
                    <p>Hospital: <strong id="success-hospital-name"></strong>.</p>
                    
                    <div class="btn-container" style="max-width: 300px; margin: 2rem auto 0;">
                        <button id="btn-reset" class="btn btn-primary">Novo Encaminhamento</button>
                    </div>
                </div>
            </div>

            <!-- Mensagem de Erro (para validação) -->
            <div id="error-message"></div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referências das Etapas
            const step0 = document.getElementById('step-0-login');
            const step1 = document.getElementById('step-1-patient');
            const step2 = document.getElementById('step-2-referral');
            const step3 = document.getElementById('step-3-success');
            
            // Título
            const portalTitle = document.getElementById('portal-title');

            // Referências dos Botões
            const btnLogin = document.getElementById('btn-login');
            const btnNext = document.getElementById('btn-next');
            const btnBack = document.getElementById('btn-back');
            const btnSubmit = document.getElementById('btn-submit');
            const btnReset = document.getElementById('btn-reset');
            
            // Referências dos Inputs
            const form = document.getElementById('referral-form');
            const inputEmail = document.getElementById('email');
            const inputPassword = document.getElementById('password');
            const inputNome = document.getElementById('nome');
            const inputCpf = document.getElementById('cpf');
            const inputTelefone = document.getElementById('telefone');
            const inputHospital = document.getElementById('hospital');
            const inputEspecialidade = document.getElementById('especialidade');
            const inputMotivo = document.getElementById('motivo');

            // Referências dos campos de sucesso
            const successPatientName = document.getElementById('success-patient-name');
            const successHospitalName = document.getElementById('success-hospital-name');
            
            // Mensagem de Erro
            const errorMsg = document.getElementById('error-message');

            function showError(message) {
                errorMsg.textContent = message;
                errorMsg.style.display = 'block';
            }

            function clearError() {
                errorMsg.textContent = '';
                errorMsg.style.display = 'none';
            }

            // Funções para máscaras de input
            function maskCPF(value) {
                return value
                    .replace(/\D/g, '')
                    .substring(0, 11)
                    .replace(/(\d{3})(\d)/, '$1.$2')
                    .replace(/(\d{3})(\d)/, '$1.$2')
                    .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            }

            function maskPhone(value) {
                return value
                    .replace(/\D/g, '')
                    .substring(0, 11)
                    .replace(/^(\d{2})(\d)/g, '($1) $2')
                    .replace(/(\d)(\d{4})$/, '$1-$2');
            }

            inputCpf.addEventListener('input', (e) => {
                e.target.value = maskCPF(e.target.value);
            });

            inputTelefone.addEventListener('input', (e) => {
                e.target.value = maskPhone(e.target.value);
            });
            
            // Função para trocar de etapa
            function goToStep(stepElement) {
                document.querySelectorAll('.form-step').forEach(step => {
                    step.classList.remove('active');
                });
                stepElement.classList.add('active');
            }

            // Ação: Login (Simulação)
            btnLogin.addEventListener('click', () => {
                clearError();
                if (inputEmail.value.trim() === '' || inputPassword.value.trim() === '') {
                    showError('Por favor, preencha seu email e senha.');
                    return;
                }
                
                console.log('Login simulado para:', inputEmail.value);
                portalTitle.textContent = 'Portal de Encaminhamento';
                goToStep(step1);
            });

            // Ação: Ir para Etapa 2
            btnNext.addEventListener('click', () => {
                clearError();
                if (inputNome.value.trim() === '' || inputCpf.value.trim().length < 14) {
                    showError('Por favor, preencha o Nome e um CPF válido do paciente.');
                    return;
                }
                goToStep(step2);
            });

            // Ação: Voltar para Etapa 1
            btnBack.addEventListener('click', () => {
                clearError();
                goToStep(step1);
            });

            // Ação: Enviar (Simulação)
            btnSubmit.addEventListener('click', () => {
                clearError();
                if (inputHospital.value === '' || inputEspecialidade.value === '') {
                    showError('Por favor, selecione o Hospital e a Especialidade.');
                    return;
                }

                successPatientName.textContent = inputNome.value;
                successHospitalName.textContent = inputHospital.value;
                
                console.log('--- DADOS DO ENCAMINHAMENTO ---');
                console.log('Paciente:', inputNome.value);
                console.log('CPF:', inputCpf.value);
                console.log('Telefone:', inputTelefone.value);
                console.log('Hospital:', inputHospital.value);
                console.log('Especialidade:', inputEspecialidade.value);
                console.log('Motivo:', inputMotivo.value);

                goToStep(step3);
            });

            // Ação: Resetar o formulário
            btnReset.addEventListener('click', () => {
                form.reset(); 
                successPatientName.textContent = '';
                successHospitalName.textContent = '';
                goToStep(step1);
            });
            
            // Inicia na Etapa 0
            // (já está feito pelo 'active' no HTML)
        });
    </script>
</body>
</html>

