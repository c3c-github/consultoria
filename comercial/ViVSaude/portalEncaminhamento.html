<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Encaminhamento - Viv Saúde</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Define a paleta de cores personalizada */
        :root {
            --viv-primary: #FFE678; /* Amarelo Viv */
            --viv-white: #FFFFFF;
            --viv-black: #000000;
            --viv-gray-text: #374151; /* Cinza escuro para texto */
            --viv-gray-border: #D1D5DB; /* Cinza para bordas de input */
        }

        /* Aplica a fonte padrão e a cor de fundo com imagem */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--viv-white);
            position: relative;
            overflow-x: hidden;
        }

        /* Imagem de fundo com gradiente */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://vivsaude.com.br/_next/image?url=https%3A%2F%2Fcms.vivsaude.com.br%2Fuploads%2FCamada_4_f639575de5.png&w=640&q=75');
            background-repeat: no-repeat;
            background-position: top right;
            background-size: cover;
            opacity: 0.2;
            z-index: -1;
        }

        /* Classes utilitárias para as cores */
        .bg-viv-primary { background-color: var(--viv-primary); }
        .text-viv-black { color: var(--viv-black); }
        .text-viv-gray { color: var(--viv-gray-text); }
        
        /* Estilo moderno para botões */
        .btn {
            @apply w-full px-5 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 ease-in-out;
            @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-viv-black;
            @apply transform hover:scale-105; /* Efeito de aumentar */
        }
        .btn-primary {
            @apply bg-viv-primary text-viv-black font-bold hover:bg-yellow-400 active:scale-95 active:shadow-inner;
        }
        .btn-secondary {
            @apply bg-viv-white text-viv-black border border-viv-gray-border hover:bg-gray-50 active:scale-95 active:shadow-inner;
        }

        /* Estilo moderno para inputs */
        .form-input {
            @apply w-full px-4 py-3 border border-viv-gray-border bg-viv-white rounded-lg transition-colors duration-150;
            @apply text-viv-gray placeholder-gray-400;
            @apply focus:outline-none focus:ring-2 focus:ring-viv-black focus:border-viv-black;
        }

        /* Container central */
        .content-overlay {
            position: relative;
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.9); /* Adiciona um fundo opaco para evitar o quadro transparente */
            border-radius: 12px; /* Borda arredondada */
            border: 1px solid var(--viv-gray-border); /* Adiciona uma borda para melhorar a visibilidade */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Container Principal do Portal -->
    <div class="content-overlay bg-viv-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-lg">
        
        <!-- Cabeçalho com Logo -->
        <header class="flex flex-col items-center mb-6">
            <img 
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:AN_d9GcRP1z6kwTR0r2z1fx6Fl6kpexB3h8GUlGrgrQ&s" 
                alt="Logo da Viv Saúde" 
                class="h-16 w-auto mb-2"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
            >
            <!-- Fallback de texto para o logo -->
            <span class="text-2xl font-bold text-viv-black hidden" style="display:none;">
                Viv Saúde
            </span>
            <h1 id="portal-title" class="text-3xl font-bold text-viv-black mt-4 text-center">
                Acesso ao Portal
            </h1>
        </header>

        <!-- Formulário Multi-Etapas -->
        <form id="referral-form" onsubmit="return false;">

            <!-- Etapa 0: Login -->
            <div id="step-0-login">
                <div class="space-y-4">
                    <div>
                        <label for="email" class="block text-sm font-medium text-viv-gray mb-1">Email (CRM ou Corporativo)</label>
                        <input type="email" id="email" class="form-input" placeholder="seu.email@dominio.com" required>
                    </div>
                    <div>
                        <label for="password" class="block text-sm font-medium text-viv-gray mb-1">Senha</label>
                        <input type="password" id="password" class="form-input" placeholder="••••••••" required>
                    </div>
                </div>
                <!-- Botão de Ação -->
                <div class="mt-8">
                    <button id="btn-login" class="btn btn-primary">
                        Entrar
                    </button>
                </div>
                <p class="text-center text-sm text-gray-500 mt-4">
                    Esqueceu a senha?
                </p>
            </div>

            <!-- Etapa 1: Dados do Paciente -->
            <div id="step-1-patient" class="hidden">
                <h2 class="text-xl font-semibold text-viv-gray mb-4">1. Dados do Paciente</h2>
                <div class="space-y-4">
                    <div>
                        <label for="nome" class="block text-sm font-medium text-viv-gray mb-1">Nome Completo</label>
                        <input type="text" id="nome" class="form-input" required>
                    </div>
                    <div>
                        <label for="cpf" class="block text-sm font-medium text-viv-gray mb-1">CPF</label>
                        <input type="text" id="cpf" class="form-input" placeholder="000.000.000-00" required>
                    </div>
                    <div>
                        <label for="telefone" class="block text-sm font-medium text-viv-gray mb-1">Telefone</label>
                        <input type="tel" id="telefone" class="form-input" placeholder="(00) 00000-0000">
                    </div>
                </div>
                <!-- Botão de Ação -->
                <div class="mt-8">
                    <button id="btn-next" class="btn btn-primary">
                        Próximo: Detalhes do Encaminhamento
                    </button>
                </div>
            </div>

            <!-- Etapa 2: Encaminhamento -->
            <div id="step-2-referral" class="hidden">
                <h2 class="text-xl font-semibold text-viv-gray mb-4">2. Encaminhamento</h2>
                <div class="space-y-4">
                    <div>
                        <label for="hospital" class="block text-sm font-medium text-viv-gray mb-1">Hospital (Viv Saúde)</label>
                        <select id="hospital" class="form-input" required>
                            <option value="">Selecione um hospital...</option>
                            <option value="Hosp. Viv Central (SP)">Hosp. Viv Central (SP)</option>
                            <option value="Hosp. Viv Zona Sul (RJ)">Hosp. Viv Zona Sul (RJ)</option>
                            <option value="Hosp. Viv Oeste (SP)">Hosp. Viv Oeste (SP)</option>
                            <option value="Hosp. Viv Barra (RJ)">Hosp. Viv Barra (RJ)</option>
                        </select>
                    </div>
                    <div>
                        <label for="especialidade" class="block text-sm font-medium text-viv-gray mb-1">Especialidade</label>
                        <select id="especialidade" class="form-input" required>
                            <option value="">Selecione a especialidade...</option>
                            <option value="Cardiologia">Cardiologia</option>
                            <option value="Ortopedia">Ortopedia</option>
                            <option value="Saúde Mental">Saúde Mental</option>
                            <option value="Clínica Geral">Clínica Geral</option>
                        </select>
                    </div>
                    <div>
                        <label for="motivo" class="block text-sm font-medium text-viv-gray mb-1">Motivo/Observações</label>
                        <textarea id="motivo" rows="3" class="form-input" placeholder="Descreva brevemente o motivo do encaminhamento..."></textarea>
                    </div>
                </div>
                <!-- Botões de Ação -->
                <div class="mt-8 flex flex-col sm:flex-row gap-4">
                    <button id="btn-back" class="btn btn-secondary">
                        Voltar
                    </button>
                    <button id="btn-submit" class="btn btn-primary">
                        Confirmar Encaminhamento
                    </button>
                </div>
            </div>

            <!-- Etapa 3: Sucesso -->
            <div id="step-3-success" class="hidden">
                <div class="text-center py-8">
                    <svg class="w-16 h-16 text-green-500 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h2 class="text-2xl font-bold text-viv-black mt-4">Encaminhamento Realizado!</h2>
                    <p class="text-viv-gray mt-2">
                        O paciente <strong id="success-patient-name"></strong> foi encaminhado com sucesso.
                    </p>
                    <p class="text-viv-gray">
                        Hospital: <strong id="success-hospital-name"></strong>.
                    </p>
                    
                    <div class="mt-8">
                        <button id="btn-reset" class="btn btn-primary">
                            Novo Encaminhamento
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mensagem de Erro (para validação) -->
            <div id="error-message" class="text-red-600 font-medium text-center mt-4" style="display: none;"></div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referências das Etapas
            const step0 = document.getElementById('step-0-login');
            const step1 = document.getElementById('step-1-patient');
            const step2 = document.getElementById('step-2-referral');
            const step3 = document.getElementById('step-3-success');
            
            // Título
            const portalTitle = document.getElementById('portal-title');

            // Referências dos Botões
            const btnLogin = document.getElementById('btn-login');
            const btnNext = document.getElementById('btn-next');
            const btnBack = document.getElementById('btn-back');
            const btnSubmit = document.getElementById('btn-submit');
            const btnReset = document.getElementById('btn-reset');
            
            // Referências dos Inputs
            const form = document.getElementById('referral-form');
            const inputEmail = document.getElementById('email');
            const inputPassword = document.getElementById('password');
            const inputNome = document.getElementById('nome');
            const inputCpf = document.getElementById('cpf');
            const inputTelefone = document.getElementById('telefone');
            const inputHospital = document.getElementById('hospital');
            const inputEspecialidade = document.getElementById('especialidade');
            const inputMotivo = document.getElementById('motivo');

            // Referências dos campos de sucesso
            const successPatientName = document.getElementById('success-patient-name');
            const successHospitalName = document.getElementById('success-hospital-name');
            
            // Mensagem de Erro
            const errorMsg = document.getElementById('error-message');

            function showError(message) {
                errorMsg.textContent = message;
                errorMsg.style.display = 'block';
            }

            function clearError() {
                errorMsg.textContent = '';
                errorMsg.style.display = 'none';
            }

            // Funções para máscaras de input (opcional, mas melhora a UX)
            function maskCPF(value) {
                return value
                    .replace(/\D/g, '') // Remove tudo o que não é dígito
                    .substring(0, 11) // Limita a 11 dígitos
                    .replace(/(\d{3})(\d)/, '$1.$2')
                    .replace(/(\d{3})(\d)/, '$1.$2')
                    .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            }

            function maskPhone(value) {
                return value
                    .replace(/\D/g, '') // Remove tudo o que não é dígito
                    .substring(0, 11) // Limita a 11 dígitos (com DDD)
                    .replace(/^(\d{2})(\d)/g, '($1) $2')
                    .replace(/(\d)(\d{4})$/, '$1-$2'); // Formata XXXXX-XXXX ou XXXX-XXXX
            }

            inputCpf.addEventListener('input', (e) => {
                e.target.value = maskCPF(e.target.value);
            });

            inputTelefone.addEventListener('input', (e) => {
                e.target.value = maskPhone(e.target.value);
            });

            // Ação: Login (Simulação)
            btnLogin.addEventListener('click', () => {
                clearError();
                // Validação simples
                if (inputEmail.value.trim() === '' || inputPassword.value.trim() === '') {
                    showError('Por favor, preencha seu email e senha.');
                    return;
                }
                
                // Simula login bem-sucedido
                console.log('Login simulado para:', inputEmail.value);
                
                portalTitle.textContent = 'Portal de Encaminhamento'; // Muda o título
                step0.classList.add('hidden');
                step1.classList.remove('hidden');
            });


            // Ação: Ir para Etapa 2
            btnNext.addEventListener('click', () => {
                clearError();
                // Validação
                if (inputNome.value.trim() === '' || inputCpf.value.trim().length < 14) { // CPF com máscara tem 14 chars
                    showError('Por favor, preencha o Nome e um CPF válido do paciente.');
                    return;
                }
                
                step1.classList.add('hidden');
                step2.classList.remove('hidden');
            });

            // Ação: Voltar para Etapa 1
            btnBack.addEventListener('click', () => {
                clearError();
                step2.classList.add('hidden');
                step1.classList.remove('hidden');
            });

            // Ação: Enviar (Simulação)
            btnSubmit.addEventListener('click', () => {
                clearError();
                // Validação
                if (inputHospital.value === '' || inputEspecialidade.vvalue === '') {
                    showError('Por favor, selecione o Hospital e a Especialidade.');
                    return;
                }

                // Exibe os dados de sucesso
                successPatientName.textContent = inputNome.value;
                successHospitalName.textContent = inputHospital.value;
                
                console.log('--- DADOS DO ENCAMINHAMENTO ---');
                console.log('Paciente:', inputNome.value);
                console.log('CPF:', inputCpf.value);
                console.log('Telefone:', inputTelefone.value);
                console.log('Hospital:', inputHospital.value);
                console.log('Especialidade:', inputEspecialidade.value);
                console.log('Motivo:', inputMotivo.value);

                // Alterna para a tela de sucesso
                step2.classList.add('hidden');
                step3.classList.remove('hidden');
            });

            // Ação: Resetar o formulário
            btnReset.addEventListener('click', () => {
                // Reseta o formulário (exceto login)
                inputNome.value = '';
                inputCpf.value = '';
                inputTelefone.value = '';
                inputHospital.value = '';
                inputEspecialidade.value = '';
                inputMotivo.value = '';
                
                // Limpa os textos de sucesso
                successPatientName.textContent = '';
                successHospitalName.textContent = '';
                
                // Volta para a etapa 1
                step3.classList.add('hidden');
                step1.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>
