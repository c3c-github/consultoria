<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Satisfação - Bosch Agronegócio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        .bg-bosch-red { background-color: #E0000B; }
        .text-bosch-red { color: #E0000B; }
        
        .nps-gauge {
            position: relative;
            width: 200px;
            height: 100px;
            overflow: hidden;
        }
        .nps-gauge::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            box-sizing: border-box;
            border: 25px solid #e0e0e0;
            border-bottom-color: transparent;
            border-left-color: transparent;
            transform: rotate(-135deg);
        }
        .nps-gauge-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            box-sizing: border-box;
            border: 25px solid #4caf50;
            border-bottom-color: transparent;
            border-left-color: transparent;
            transform: rotate(-135deg);
            transition: transform 1.5s ease-in-out;
            clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
        }
        .nps-gauge-text {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        .star {
            color: #f59e0b; /* amber-500 */
        }
        .empty-star {
            color: #d1d5db; /* gray-300 */
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Main Content -->
    <main class="p-6 md:p-8">
        <header class="flex justify-between items-center mb-8">
            <div>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Bosch-logo.svg/1280px-Bosch-logo.svg.png" alt="Logo Bosch" class="h-8 mb-4">
                <h1 class="text-3xl font-bold text-gray-800">Dashboard de Satisfação do Cliente</h1>
                <p class="text-gray-600">Bosch Agronegócio - Últimos 90 dias</p>
            </div>
             <div class="flex items-center gap-2">
                <span class="text-gray-600">Olá, Ricardo</span>
                <img src="https://placehold.co/40x40/FFC0CB/333?text=R" class="rounded-full">
                </div>
            </header>

            <!-- KPIs -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-gray-500 font-semibold">Total de Respostas</h2>
                    <p id="total-responses" class="text-4xl font-bold mt-2">1,258</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-gray-500 font-semibold">NPS (Net Promoter Score)</h2>
                    <p id="nps-score" class="text-4xl font-bold mt-2 text-green-600">+52</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-gray-500 font-semibold">Satisfação com Produto</h2>
                    <div id="product-satisfaction" class="flex items-center mt-2">
                        <p class="text-4xl font-bold mr-2">4.6</p>
                        <div class="flex text-2xl">
                            <span class="star">★</span><span class="star">★</span><span class="star">★</span><span class="star">★</span><span class="star">★</span>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-gray-500 font-semibold">Satisfação com Atendimento</h2>
                    <div id="support-satisfaction" class="flex items-center mt-2">
                        <p class="text-4xl font-bold mr-2">4.8</p>
                        <div class="flex text-2xl">
                             <span class="star">★</span><span class="star">★</span><span class="star">★</span><span class="star">★</span><span class="star">★</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NPS Details & Trend -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Detalhamento do NPS</h2>
                    <div class="flex justify-center">
                        <div class="nps-gauge">
                             <div id="nps-gauge-fill" class="nps-gauge-fill"></div>
                             <div class="nps-gauge-text">
                                 <div class="text-4xl font-bold" id="nps-gauge-score">+52</div>
                                 <div class="text-gray-500">Excelente</div>
                             </div>
                        </div>
                    </div>
                    <div class="mt-6 space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-green-500 mr-2"></span>Promotores</span>
                            <span id="promoters-count" class="font-bold">65% (818)</span>
                        </div>
                         <div class="flex justify-between items-center">
                            <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-yellow-400 mr-2"></span>Neutros</span>
                            <span id="passives-count" class="font-bold">22% (277)</span>
                        </div>
                         <div class="flex justify-between items-center">
                            <span class="flex items-center"><span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span>Detratores</span>
                            <span id="detractors-count" class="font-bold">13% (163)</span>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                     <h2 class="text-xl font-bold text-gray-800 mb-4">Tendência de Satisfação (NPS)</h2>
                     <canvas id="npsTrendChart"></canvas>
                </div>
            </div>
            
            <!-- NPS Distribution & Feedback -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                 <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-md">
                     <h2 class="text-xl font-bold text-gray-800 mb-4">Distribuição de Notas NPS</h2>
                     <canvas id="npsDistributionChart"></canvas>
                </div>
                 <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Feedback Recente</h2>
                    <div class="space-y-4 max-h-80 overflow-y-auto pr-2">
                        <!-- Feedback items will be generated here -->
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <div class="flex justify-between items-start">
                                <p class="text-sm text-gray-700">"O monitor de plantio é fantástico, muito preciso. A instalação na concessionária foi rápida e profissional."</p>
                                <span class="flex-shrink-0 ml-4 px-2 py-0.5 text-sm bg-green-100 text-green-800 rounded-full font-semibold">10</span>
                            </div>
                        </div>
                         <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-sm text-gray-700">"Produto bom, mas tive dificuldade para entender uma das funções. O manual poderia ser mais claro."</p>
                            <span class="mt-2 inline-block px-2 py-0.5 text-sm bg-yellow-100 text-yellow-800 rounded-full font-semibold">8</span>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-sm text-gray-700">"Tive um problema com um sensor e demorou um pouco para conseguir o suporte técnico na minha região."</p>
                             <span class="mt-2 inline-block px-2 py-0.5 text-sm bg-red-100 text-red-800 rounded-full font-semibold">6</span>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                             <p class="text-sm text-gray-700">"Equipamento robusto e confiável. Já recomendei para dois vizinhos."</p>
                             <span class="mt-2 inline-block px-2 py-0.5 text-sm bg-green-100 text-green-800 rounded-full font-semibold">9</span>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Mock Data ---
            const totalResponses = 1258;
            const promoters = 818; // 65%
            const passives = 277; // 22%
            const detractors = 163; // 13%
            
            const npsScore = Math.round(((promoters / totalResponses) - (detractors / totalResponses)) * 100);

            // --- Update KPIs ---
            document.getElementById('total-responses').textContent = totalResponses.toLocaleString('pt-BR');
            document.getElementById('nps-score').textContent = `+${npsScore}`;
            document.getElementById('nps-gauge-score').textContent = `+${npsScore}`;
            
            // --- Update NPS Gauge ---
            // NPS score from -100 to 100. Range is 200. Gauge is 180deg.
            const npsGaugeFill = document.getElementById('nps-gauge-fill');
            const rotation = (npsScore + 100) / 200 * 180; // Map score to 0-180 degrees
            npsGaugeFill.style.transform = `rotate(${rotation - 135}deg)`;
            if (npsScore > 50) npsGaugeFill.style.borderColor = '#4caf50'; // green
            else if (npsScore > 0) npsGaugeFill.style.borderColor = '#ffc107'; // yellow
            else npsGaugeFill.style.borderColor = '#f44336'; // red

            // --- Update Star Ratings (helper function) ---
            function updateStars(elementId, rating) {
                const container = document.getElementById(elementId);
                const ratingValueEl = container.querySelector('p');
                const starsContainer = container.querySelector('div');
                
                ratingValueEl.textContent = rating.toFixed(1);
                
                const fullStars = Math.floor(rating);
                const halfStar = rating % 1 !== 0;
                let starsHTML = '';

                for(let i=0; i < fullStars; i++) starsHTML += '<span class="star">★</span>';
                if(halfStar) starsHTML += `<span class="star" style="background: linear-gradient(90deg, #f59e0b 50%, #d1d5db 50%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">★</span>`;
                for(let i=0; i < 5 - Math.ceil(rating); i++) starsHTML += '<span class="empty-star">★</span>';
                
                starsContainer.innerHTML = starsHTML;
            }

            updateStars('product-satisfaction', 4.6);
            updateStars('support-satisfaction', 4.8);


            // --- Chart: NPS Distribution ---
            const npsDistributionCtx = document.getElementById('npsDistributionChart').getContext('2d');
            new Chart(npsDistributionCtx, {
                type: 'bar',
                data: {
                    labels: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: 'Número de Respostas',
                        data: [10, 8, 15, 20, 30, 80, 100, 120, 157, 300, 418],
                        backgroundColor: (context) => {
                            const index = context.dataIndex;
                            if (index <= 6) return '#ef4444'; // red-500
                            if (index <= 8) return '#f59e0b'; // amber-500
                            return '#22c55e'; // green-500
                        },
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });

            // --- Chart: NPS Trend ---
            const npsTrendCtx = document.getElementById('npsTrendChart').getContext('2d');
            new Chart(npsTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago'],
                    datasets: [{
                        label: 'NPS Mensal',
                        data: [45, 48, 46, 50, 55, 52],
                        fill: true,
                        backgroundColor: 'rgba(224, 0, 11, 0.1)',
                        borderColor: '#E0000B',
                        tension: 0.4,
                        pointBackgroundColor: '#E0000B',
                        pointRadius: 5
                    }]
                },
                 options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: false, suggestedMin: 40, suggestedMax: 60 } }
                }
            });
        });
    </script>
</body>
</html>